<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>

  <property>    
    <name>mapreduce.framework.name</name>    
    <value>yarn</value>  
  </property>

  <property>
    <name>mapred.system.dir</name>
    <value>/mapred/system</value>
  </property>

  <property>
    <name>mapred.local.dir</name>
    <value>/data/disk1/mapred/local,/data/disk2/mapred/local,/data/disk3/mapred/local,/data/disk4/mapred/local,/data/disk5/mapred/local,/data/disk6/mapred/local,/data/disk7/mapred/local,/data/disk8/mapred/local,/data/disk9/mapred/local,/data/disk10/mapred/local,/data/disk11/mapred/local,/data/disk12/mapred/local</value>
  </property>

  <property>
    <name>mapreduce.jobhistory.address</name>
    <value>nn03.3pas.admatrix.jp:10020</value>
  </property>

  <property>
    <name>mapreduce.jobhistory.webapp.address</name>
    <value>nn03.3pas.admatrix.jp:19888</value>
  </property>

  <property>
    <name>mapreduce.task.io.sort.factor</name>
    <value>100</value>
  </property>

  <property>
    <name>mapreduce.task.io.sort.mb</name>
    <value>1024</value>
  </property>

  <property>
    <name>mapreduce.reduce.shuffle.input.buffer.percent</name>
    <value>0.7</value>
  </property>

  <property>
    <name>mapreduce.reduce.shuffle.parallelcopies</name>
    <value>15</value>
  </property>

  <property>
    <name>mapreduce.map.cpu.vcores</name>
    <value>1</value>
  </property>

  <property>
    <name>mapreduce.reduce.cpu.vcores</name>
    <value>1</value>
  </property>

  <property>
    <name>mapreduce.shuffle.transferTo.allowed</name>
    <value>true</value>
  </property>

  <property>
    <name>mapreduce.output.fileoutputformat.compress</name>
    <value>true</value>
  </property>

  <property>
    <name>mapreduce.output.fileoutputformat.compress.type</name>
    <value>BLOCK</value>
  </property>

  <property>
    <name>mapreduce.output.fileoutputformat.compress.codec</name>
    <value>org.apache.hadoop.io.compress.SnappyCodec</value>
  </property>

  <property>
    <name>mapreduce.map.output.compress</name>
    <value>true</value>
  </property>

  <property>
    <name>mapreduce.map.output.compress.codec</name>
    <value>org.apache.hadoop.io.compress.SnappyCodec</value>
  </property>

  <property>
    <name>mapreduce.job.ubertask.enable</name>
    <value>true</value>
  </property>

  <property>
    <name>mapreduce.job.ubertask.maxmaps</name>
    <value>400</value>
  </property>

  <property>
    <name>mapreduce.job.ubertask.maxreduces</name>
    <value>200</value>
  </property>

  <property>
    <name>mapreduce.job.ubertask.maxbytes</name>
    <value>134217728</value>
  </property>

  <property>
    <name>mapreduce.map.speculative</name>
    <value>true</value>
  </property>

  <property>
    <name>mapreduce.reduce.speculative</name>
    <value>false</value>
  </property>

  <!-- mapred am tuninig -->
  <property>
    <name>yarn.app.mapreduce.am.resource.mb</name>
    <value>9249</value>
  </property>

  <property>
    <name>yarn.app.mapreduce.am.command-opts</name>
    <value>2459</value>
  </property>

  <property>
    <name>yarn.app.mapreduce.am.resource.cpu-vcores</name>
    <value>1</value>
  </property>

  <!-- mapred memory tuning -->
  <property>
    <name>mapreduce.map.java.opts</name>
    <value>-Xmx2458m</value>
  </property>

  <property>
    <name>mapreduce.reduce.java.opts</name>
    <value>-Xmx4196m</value>
  </property>

  <property>
    <name>mapred.child.java.opts</name>
    <value>-Xmx6144m</value>
  </property>

  <property>
    <name>mapreduce.map.memory.mb</name>
    <value>3072</value>
  </property>

  <property>
    <name>mapreduce.map.java.opts.max.heap</name>
    <value>2458</value>
  </property>

  <property>
    <name>mapreduce.reduce.memory.mb</name>
    <value>6144</value>
  </property>

  <property>
    <name>mapreduce.reduce.java.opts.max.heap</name>
    <value>4196</value>
  </property>

</configuration>
